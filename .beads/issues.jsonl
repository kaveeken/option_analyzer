{"id":"option_returns-0on","title":"Phase 2: Statistical Engine","description":"Price distribution modeling and risk metrics\n\nTasks:\n- [ ] Implement geometric returns, bootstrap\n- [ ] Direct returns vs Monte Carlo modes\n- [ ] Price range calculation (auto + user override)\n- [ ] Histogram binning\n- [ ] Risk metrics (EV, PoP) with transaction costs\n- [ ] Comprehensive unit tests\n- [ ] Performance benchmarks (bootstrap simulation)\n\nDeliverables:\n- Bootstrap simulation (10k samples \u003c5s)\n- Price distribution functions\n- Risk calculation engine\n- Test coverage \u003e90%\n\nSuccess Criteria:\n- 10,000 simulations complete in \u003c5 seconds\n- Price range auto-calculated with 5% padding\n- Transaction costs included in all metrics","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-19T21:53:21.821557539+01:00","updated_at":"2025-12-19T21:53:21.821557539+01:00","dependencies":[{"issue_id":"option_returns-0on","depends_on_id":"option_returns-yaf","type":"blocks","created_at":"2025-12-19T21:54:20.9232971+01:00","created_by":"daemon"},{"issue_id":"option_returns-0on","depends_on_id":"option_returns-i75","type":"blocks","created_at":"2025-12-21T21:42:38.379669001+01:00","created_by":"daemon"},{"issue_id":"option_returns-0on","depends_on_id":"option_returns-eiu","type":"blocks","created_at":"2025-12-21T21:42:38.417580431+01:00","created_by":"daemon"},{"issue_id":"option_returns-0on","depends_on_id":"option_returns-ba7","type":"blocks","created_at":"2025-12-21T21:42:38.453247257+01:00","created_by":"daemon"},{"issue_id":"option_returns-0on","depends_on_id":"option_returns-ukg","type":"blocks","created_at":"2025-12-21T21:42:38.491892013+01:00","created_by":"daemon"},{"issue_id":"option_returns-0on","depends_on_id":"option_returns-eav","type":"blocks","created_at":"2025-12-21T21:42:38.52741603+01:00","created_by":"daemon"}]}
{"id":"option_returns-4cu","title":"Document or validate negative days_to_expiry behavior","description":"The days_to_expiry() method can return negative values when reference_date is after expiration, but this is undocumented.\n\nIssues:\n- Unclear if negative values are intentional (for historical analysis) or a bug\n- No documentation about this edge case\n- No tests for past expiration scenarios\n- Calculations using this value might assume positive values\n\nSolution: Either add explicit documentation explaining negative values are allowed for historical analysis, OR add validation to raise ValueError if reference_date \u003e expiration.\n\nFile: src/option_analyzer/models/domain.py:90-101","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T09:22:09.487959694+01:00","updated_at":"2025-12-21T16:19:13.01000432+01:00","closed_at":"2025-12-21T16:19:13.01000432+01:00","close_reason":"Added validation to raise ValueError when reference_date is after expiration. Updated docstring and added comprehensive test coverage."}
{"id":"option_returns-6ik","title":"Implement Historical Data Endpoint","description":"Implement get_historical_data(symbol, years) -\u003e dict method. Uses /historical/{conid} endpoint. Cache integration with 24h TTL. Mock-based unit tests. Returns data suitable for Phase 2 geometric returns calculation.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-21T21:51:16.468395338+01:00","updated_at":"2025-12-21T21:51:16.468395338+01:00","dependencies":[{"issue_id":"option_returns-6ik","depends_on_id":"option_returns-ouf","type":"blocks","created_at":"2025-12-21T21:51:25.687832717+01:00","created_by":"daemon"},{"issue_id":"option_returns-6ik","depends_on_id":"option_returns-7xh","type":"blocks","created_at":"2025-12-21T21:51:25.720928334+01:00","created_by":"daemon"}]}
{"id":"option_returns-7xh","title":"Implement Symbol Lookup Endpoint","description":"Implement get_conid(symbol: str) -\u003e int method in IBKRClient. Uses /search or /trsrv/stocks endpoint. Cache integration with 24h TTL. Mock-based unit tests for success and error cases (symbol not found, ambiguous, API down).","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-21T21:51:15.412423802+01:00","updated_at":"2025-12-21T21:51:15.412423802+01:00","dependencies":[{"issue_id":"option_returns-7xh","depends_on_id":"option_returns-ouf","type":"blocks","created_at":"2025-12-21T21:51:24.616332689+01:00","created_by":"daemon"}]}
{"id":"option_returns-9jk","title":"Profile bootstrap performance and validate \u003c5s target","description":"Validate that NumPy vectorization achieves the 10k simulations in \u003c5s performance target.\n\nProfiling tasks:\n- Benchmark 10k simulations with varying steps (10, 50, 100)\n- Profile with cProfile to identify bottlenecks\n- Test with realistic historical data sizes (252, 1000, 5000 returns)\n- Measure memory usage for large simulations\n- Document hardware specs and results\n\nIf targets not met, investigate:\n- Batch processing for memory constraints\n- numba JIT compilation\n- Alternative sampling strategies\n- Chunking large simulations\n\nSuccess criteria:\n- 10k × 50 steps completes in \u003c5s on typical hardware\n- Memory usage acceptable for realistic datasets\n- Fallback strategy documented if needed\n\nFiles: src/option_analyzer/services/statistics.py (monte_carlo_simulation)\nTests: tests/performance/test_bootstrap.py\nRelated: Phase 2 Statistical Engine","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-21T21:55:07.492018349+01:00","updated_at":"2025-12-21T21:55:07.492018349+01:00"}
{"id":"option_returns-azx","title":"Add validate_for_analysis() method to Strategy","description":"Add a comprehensive validation method to Strategy that checks if it's ready for analysis.\n\nShould validate:\n- Single expiration (all options expire on same date)\n- All option positions have valid bid/ask data\n- At least one position exists (optional)\n\nLocation: src/option_analyzer/models/domain.py (Strategy class)\n\nImplementation:\ndef validate_for_analysis(self) -\u003e None:\n    if not self.validate_single_expiration():\n        raise MixedExpirationError()\n    for pos in self.option_positions:\n        if pos.contract.bid is None or pos.contract.ask is None:\n            raise MissingBidAskError(f'Missing price data for contract {pos.contract.conid}')\n\nBenefits:\n- Fail fast before expensive calculations\n- Clear error messages\n- Single method to call before any analysis\n- Can be extended with additional validations","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T22:12:42.378167697+01:00","updated_at":"2025-12-21T21:15:11.38169971+01:00","closed_at":"2025-12-21T21:15:11.38169971+01:00","close_reason":"Closed"}
{"id":"option_returns-b8y","title":"Phase 7: Polish \u0026 Deployment","description":"Final polish and deployment readiness\n\nTasks:\n- [ ] Logging \u0026 observability\n- [ ] Performance optimization\n- [ ] Documentation\n- [ ] Deployment guide\n\nDeliverables:\n- Structured logging\n- Performance monitoring\n- User documentation\n- Deployment instructions\n\nSuccess Criteria:\n- All success criteria met\n- Documentation complete\n- Ready for single-user local deployment","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-19T21:53:23.863301009+01:00","updated_at":"2025-12-19T21:53:23.863301009+01:00","dependencies":[{"issue_id":"option_returns-b8y","depends_on_id":"option_returns-iol","type":"blocks","created_at":"2025-12-19T21:54:21.153277891+01:00","created_by":"daemon"}]}
{"id":"option_returns-b96","title":"Implement Option Chain Endpoint","description":"Implement get_option_chain(symbol, expiration, right) -\u003e list[OptionContract] method. Uses /option/chain endpoint. Returns Phase 1 OptionContract models. Cache integration with 15min TTL. Mock-based unit tests.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-21T21:51:16.107350909+01:00","updated_at":"2025-12-21T21:51:16.107350909+01:00","dependencies":[{"issue_id":"option_returns-b96","depends_on_id":"option_returns-ouf","type":"blocks","created_at":"2025-12-21T21:51:25.315638062+01:00","created_by":"daemon"},{"issue_id":"option_returns-b96","depends_on_id":"option_returns-7xh","type":"blocks","created_at":"2025-12-21T21:51:25.352957984+01:00","created_by":"daemon"}]}
{"id":"option_returns-ba7","title":"Unit tests for Statistics Module (\u003e90% coverage)","description":"Comprehensive unit tests for all statistical functions.\n\nDeliverables:\n- tests/unit/test_statistics.py (~500 lines)\n- Test fixtures in tests/conftest.py (returns arrays, test data)\n- ~32 unit tests across 7 test classes\n\nTest Classes:\n- TestGeometricReturns (4 tests) - basic calc, multi-period, errors\n- TestCalculatePeriodForDays (3 tests) - daily/weekly/monthly bars\n- TestBootstrapWalk (3 tests) - deterministic with seed, positive results\n- TestMonteCarloSimulation (5 tests) - shape, all positive, errors\n- TestGetPriceDistribution (5 tests) - direct/MC modes, edge cases\n- TestCalculatePriceRange (5 tests) - auto, user override, validation\n- TestCreateHistogram (7 tests) - binning, max value edge case, properties\n\nCoverage Target: \u003e90% for statistics.py\n\nTest Patterns:\n- Class-based organization\n- Fixtures from conftest.py\n- pytest.approx() and np.allclose() for floats\n- RNG seeds for reproducibility\n- Comprehensive edge cases","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T21:41:38.749005618+01:00","updated_at":"2025-12-23T14:52:11.260275555+01:00","closed_at":"2025-12-23T14:52:11.260275555+01:00","close_reason":"Closed","dependencies":[{"issue_id":"option_returns-ba7","depends_on_id":"option_returns-i75","type":"blocks","created_at":"2025-12-21T21:42:30.019480042+01:00","created_by":"daemon"}]}
{"id":"option_returns-dcz","title":"Phase 4: API Layer","description":"FastAPI routes with session management\n\nTasks:\n- [ ] Session state service with cookie management\n- [ ] Session cleanup background task (every 5 min)\n- [ ] Automatic target date selection (earliest expiration)\n- [ ] Request validation (Pydantic schemas)\n- [ ] Standardized error responses\n- [ ] FastAPI routes with session dependency injection\n- [ ] Position modification endpoints (PATCH, DELETE)\n- [ ] Strategy summary endpoint\n- [ ] Change reset to POST (not DELETE)\n- [ ] API integration tests with validation checks\n\nDeliverables:\n- All REST endpoints implemented\n- Session management with cookies\n- Validation and error handling\n- Auto-documentation at /docs\n\nSuccess Criteria:\n- Sessions persist across requests\n- Mixed expiration rejected with MIXED_EXPIRATION error\n- Auto target date selection works\n- All endpoints return standardized errors","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-19T21:53:22.714365181+01:00","updated_at":"2025-12-19T21:53:22.714365181+01:00","dependencies":[{"issue_id":"option_returns-dcz","depends_on_id":"option_returns-tgg","type":"blocks","created_at":"2025-12-19T21:54:21.018660374+01:00","created_by":"daemon"}]}
{"id":"option_returns-dia","title":"Modernize deprecated type hints to Python 3.11+ syntax","description":"Update deprecated typing imports and type hints to modern Python 3.11+ syntax.\n\nCurrent violations (8 total):\n- UP035: typing.List is deprecated, use list instead\n- UP006: Use list instead of List for type annotations\n- UP045: Use X | None instead of Optional[X]\n\nFiles affected:\n- src/option_analyzer/models/domain.py (lines 12, 33, 66-67, 90, 183, 235)\n- src/option_analyzer/config.py (line 38)\n\nChanges needed:\n- List[date] → list[date]\n- Optional[float] → float | None\n- Optional[date] → date | None\n- List[OptionPosition] → list[OptionPosition]\n\nSolution: Run 'ruff check --fix' to auto-fix all violations (~2 minutes work).\n\nThis should be done before Phase 2 to maintain modern Python standards.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T09:26:51.761246547+01:00","updated_at":"2025-12-21T16:10:22.348925618+01:00","closed_at":"2025-12-21T16:10:22.348925618+01:00","close_reason":"Closed"}
{"id":"option_returns-dmu","title":"Add IBKR Custom Exceptions","description":"Add 6 new exceptions to src/option_analyzer/utils/exceptions.py: IBKRAPIError, IBKRConnectionError, RateLimitExceededError, SymbolNotFoundError, InsufficientDataError, AmbiguousSymbolError","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-21T21:50:51.052583979+01:00","updated_at":"2025-12-21T21:50:51.052583979+01:00"}
{"id":"option_returns-eav","title":"Performance tests and benchmarks (\u003c5s for 10k simulations)","description":"Performance validation and benchmarking for bootstrap simulation.\n\nDeliverables:\n- tests/performance/test_bootstrap.py (~50 lines)\n- Performance test results documentation\n\nPerformance Tests:\n- test_10k_simulations_under_5_seconds()\n  - 10,000 Monte Carlo simulations with 50 steps\n  - Assert completion in \u003c5 seconds\n  - Verify correct output shape\n  \n- test_vectorization_speedup()\n  - Compare vectorized vs loop implementation\n  - Document speedup factor\n  \n- test_large_dataset_binning()\n  - 100,000 values into 100 bins\n  - Assert completion in \u003c1 second\n\nSuccess Criteria:\n- All performance targets met\n- Vectorization confirmed working\n- Results documented for future regression testing\n\nNotes:\n- Use time.time() for timing\n- Run multiple iterations for stability\n- Document hardware specs in results","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-21T21:42:23.153528928+01:00","updated_at":"2025-12-21T21:42:23.153528928+01:00","dependencies":[{"issue_id":"option_returns-eav","depends_on_id":"option_returns-i75","type":"blocks","created_at":"2025-12-21T21:42:30.105531869+01:00","created_by":"daemon"}]}
{"id":"option_returns-eiu","title":"Implement Risk Metrics Module (EV, PoP)","description":"Risk metrics calculation with Strategy integration.\n\nDeliverables:\n- src/option_analyzer/services/risk.py (~150 lines)\n- RiskMetrics Pydantic model (EV, PoP, max_gain, max_loss, breakevens)\n- calculate_expected_value() - probability-weighted P\u0026L\n- calculate_probability_of_profit() - fraction with P\u0026L \u003e 0\n- calculate_risk_metrics() - main entry point with validation\n\nTechnical Requirements:\n- Calls strategy.validate_for_analysis() before expensive calculations\n- Uses strategy.total_payoff(bin.midpoint) for P\u0026L evaluation\n- Weights by bin.count / total_count for probabilities\n- Comprehensive docstrings and type hints\n\nIntegration:\n- Depends on Statistics Module for PriceBin\n- Integrates with Strategy from domain.py\n- Uses transaction costs from config","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-21T21:40:44.003622384+01:00","updated_at":"2025-12-21T21:40:44.003622384+01:00","dependencies":[{"issue_id":"option_returns-eiu","depends_on_id":"option_returns-i75","type":"blocks","created_at":"2025-12-21T21:42:29.975928721+01:00","created_by":"daemon"}]}
{"id":"option_returns-ept","title":"Add IBKR Configuration Settings","description":"Add missing config fields to Settings class: ibkr_verify_ssl, ibkr_max_retries, ibkr_retry_delay. Update default_historical_years if needed.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T21:50:50.371361085+01:00","updated_at":"2025-12-23T14:57:28.697073951+01:00","closed_at":"2025-12-23T14:57:28.697073951+01:00","close_reason":"Closed"}
{"id":"option_returns-f1q","title":"Validate trading days assumption (252/365 vs actual calendar)","description":"Current plan uses 252/365 ratio for trading day adjustments, which is a simplification that doesn't account for actual market holidays or different exchange calendars.\n\nInvestigation needed:\n- Measure error accumulation over typical analysis periods (30d, 60d, 1y)\n- Evaluate if precision is acceptable for expected use cases\n- Consider alternatives: actual trading day counts, exchange-specific calendars\n- Document decision rationale\n\nDecision criteria:\n- Is the error \u003c1% for typical periods?\n- Do we need exchange-specific calendars?\n- Does simplicity outweigh precision for MVP?\n\nFiles: src/option_analyzer/services/statistics.py (calculate_period_for_days)\nRelated: Phase 2 Statistical Engine","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-21T21:55:06.79737231+01:00","updated_at":"2025-12-21T21:55:06.79737231+01:00"}
{"id":"option_returns-gd3","title":"End-to-End Error Handling Tests","description":"Test all error conditions across endpoints. Verify retry logic with network failures. Verify rate limiting prevents bans. Test cache behavior under error conditions. Comprehensive unhappy path coverage.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-21T21:51:34.698794289+01:00","updated_at":"2025-12-21T21:51:34.698794289+01:00","dependencies":[{"issue_id":"option_returns-gd3","depends_on_id":"option_returns-7xh","type":"blocks","created_at":"2025-12-21T21:51:41.014937849+01:00","created_by":"daemon"},{"issue_id":"option_returns-gd3","depends_on_id":"option_returns-tbp","type":"blocks","created_at":"2025-12-21T21:51:41.050650422+01:00","created_by":"daemon"},{"issue_id":"option_returns-gd3","depends_on_id":"option_returns-b96","type":"blocks","created_at":"2025-12-21T21:51:41.090499614+01:00","created_by":"daemon"},{"issue_id":"option_returns-gd3","depends_on_id":"option_returns-6ik","type":"blocks","created_at":"2025-12-21T21:51:41.126291918+01:00","created_by":"daemon"}]}
{"id":"option_returns-gk1","title":"Phase 5: Visualization","description":"Strategy plot generation with matplotlib\n\nTasks:\n- [ ] Matplotlib chart generation (async with thread pool)\n- [ ] Per-session plot file naming\n- [ ] Plot directory creation and cleanup\n- [ ] Plot caching\n- [ ] Visual regression tests\n\nDeliverables:\n- Dual-axis chart (histogram + P\u0026L curve)\n- Session-isolated plot files\n- Async rendering (non-blocking)\n\nSuccess Criteria:\n- Plot generation doesn't block requests\n- Plots saved as /static/plots/{session_id}_{timestamp}.png\n- Old plots cleaned up with sessions","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-19T21:53:23.098098833+01:00","updated_at":"2025-12-19T21:53:23.098098833+01:00","dependencies":[{"issue_id":"option_returns-gk1","depends_on_id":"option_returns-dcz","type":"blocks","created_at":"2025-12-19T21:54:21.064077655+01:00","created_by":"daemon"}]}
{"id":"option_returns-gwz","title":"Refactor RateLimiter.acquire() to reduce cyclomatic complexity","description":"The acquire() method in rate_limiter.py has cyclomatic complexity of 7 due to duplicated cleanup logic.\n\nCurrent issues:\n- Cleanup logic repeated at lines 52-53 and 62-63\n- Nested while loops make testing edge cases harder\n- Difficult to maintain for future developers\n\nSolution: Extract cleanup as private _cleanup_expired_requests() method to eliminate duplication and reduce complexity.\n\nFile: src/option_analyzer/utils/rate_limiter.py:39-66","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T09:22:09.152376727+01:00","updated_at":"2025-12-21T16:19:28.151106582+01:00","closed_at":"2025-12-21T16:19:28.151106582+01:00","close_reason":"Closed"}
{"id":"option_returns-h04","title":"Raise MissingBidAskError when option price data is unavailable","description":"Currently OptionPosition.premium_paid defaults to 0.0 when bid/ask is None. This can lead to incorrect P\u0026L calculations. Update to raise MissingBidAskError instead to catch missing price data early.\n\nLocation: src/option_analyzer/models/domain.py:143-148\n\nChanges needed:\n- Update premium_paid property to validate bid/ask is not None\n- Raise MissingBidAskError with helpful message indicating which contract\n- Update tests to verify error is raised\n- Consider adding a has_price_data() helper method\n\nImpact: Prevents silent failures in analysis when price data is missing","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T22:12:42.041132593+01:00","updated_at":"2025-12-21T21:18:54.319050628+01:00","closed_at":"2025-12-21T21:18:54.319050628+01:00","close_reason":"Closed"}
{"id":"option_returns-i75","title":"Implement Statistics Module (geometric returns, bootstrap, histogram)","description":"Core statistical functions for price distribution modeling.\n\nDeliverables:\n- src/option_analyzer/services/statistics.py (~350 lines)\n- PriceBin Pydantic model with midpoint/width properties\n- geometric_returns() - calculate price multipliers\n- calculate_period_for_days() - trading day adjustment\n- bootstrap_walk() - single random walk\n- monte_carlo_simulation() - vectorized bootstrap (10k samples \u003c5s)\n- get_price_distribution() - direct + Monte Carlo modes\n- calculate_price_range() - auto with 5% padding + user override\n- create_histogram() - with max value edge case handling\n\nTechnical Requirements:\n- NumPy vectorization for performance\n- Comprehensive docstrings with Args/Returns/Raises/Examples\n- Type hints (Python 3.11+ syntax)\n- Input validation with clear error messages\n\nReferences:\n- Plan file: /var/home/kris/.claude/plans/purring-sparking-cookie.md\n- Integration: src/option_analyzer/models/domain.py","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T21:40:35.763673159+01:00","updated_at":"2025-12-21T22:00:33.049752525+01:00","closed_at":"2025-12-21T22:00:33.049752525+01:00","close_reason":"Implemented Statistics Module with all required components:\n- PriceBin Pydantic model with midpoint/width properties\n- geometric_returns() for price multiplier calculation\n- calculate_period_for_days() with trading day adjustment\n- bootstrap_walk() for single random walk simulation\n- monte_carlo_simulation() with vectorized NumPy (10k sims in 0.007s - way under 5s target!)\n- get_price_distribution() supporting both direct and Monte Carlo modes\n- calculate_price_range() with automatic 5% padding and user overrides\n- create_histogram() with proper max value edge case handling\n\nAll functions include comprehensive docstrings, Python 3.11+ type hints, input validation, and use NumPy vectorization for performance. Code passes ruff checks and integrates cleanly with existing test suite."}
{"id":"option_returns-iol","title":"Phase 6: Frontend","description":"Web UI with vanilla JavaScript\n\nTasks:\n- [ ] HTML/CSS structure\n- [ ] Loading state UI (spinners, disabled buttons)\n- [ ] Error display component\n- [ ] Modular JavaScript with state management\n- [ ] Position modification UI (edit, delete)\n- [ ] Strategy summary display\n- [ ] Analysis parameters controls (historical years, price range)\n- [ ] Event handling\n- [ ] Playwright E2E tests\n\nDeliverables:\n- Responsive web interface\n- Loading states for all operations\n- Position management UI\n- E2E test suite\n\nSuccess Criteria:\n- Mobile-responsive design\n- Loading states prevent user confusion\n- Errors display with clear messages\n- E2E tests cover critical user flows","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-19T21:53:23.479622932+01:00","updated_at":"2025-12-19T21:53:23.479622932+01:00","dependencies":[{"issue_id":"option_returns-iol","depends_on_id":"option_returns-gk1","type":"blocks","created_at":"2025-12-19T21:54:21.108735622+01:00","created_by":"daemon"}]}
{"id":"option_returns-jcq","title":"Implement Cache Interface and In-Memory Cache","description":"Create CacheInterface protocol in src/option_analyzer/clients/cache.py. Implement InMemoryCache with TTL support. Unit tests for cache behavior (set, get, expiration).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T21:50:50.717707001+01:00","updated_at":"2025-12-23T15:10:09.503828968+01:00","closed_at":"2025-12-23T15:10:09.503828968+01:00","close_reason":"Closed"}
{"id":"option_returns-k5z","title":"Integration Tests with Real IBKR (Optional)","description":"Real API tests marked with @pytest.mark.integration. Requires running IBKR Client Portal. Skip by default (pytest -m 'not integration'). Tests all endpoints with real API calls.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T21:51:34.36387961+01:00","updated_at":"2025-12-21T21:51:34.36387961+01:00","dependencies":[{"issue_id":"option_returns-k5z","depends_on_id":"option_returns-7xh","type":"blocks","created_at":"2025-12-21T21:51:40.580210385+01:00","created_by":"daemon"},{"issue_id":"option_returns-k5z","depends_on_id":"option_returns-tbp","type":"blocks","created_at":"2025-12-21T21:51:40.619117607+01:00","created_by":"daemon"},{"issue_id":"option_returns-k5z","depends_on_id":"option_returns-b96","type":"blocks","created_at":"2025-12-21T21:51:40.654815513+01:00","created_by":"daemon"},{"issue_id":"option_returns-k5z","depends_on_id":"option_returns-6ik","type":"blocks","created_at":"2025-12-21T21:51:40.690557371+01:00","created_by":"daemon"}]}
{"id":"option_returns-lmj","title":"Define histogram epsilon strategy for max value inclusion","description":"Histogram binning needs to ensure maximum values are included in the last bin, but the epsilon strategy is not specified in the plan.\n\nOptions to evaluate:\n1. Fixed epsilon: upper = max_value + 1e-10\n2. Relative epsilon: upper = max_value * 1.000001\n3. NumPy nextafter: upper = np.nextafter(max_value, np.inf)\n4. Inclusive comparison: last bin uses \u003c= instead of \u003c\n\nTrade-offs:\n- Numerical precision at extreme values\n- Readability and maintainability\n- Edge cases (very large/small values)\n- Performance implications\n\nDecision needed before finalizing create_histogram() implementation.\n\nFiles: src/option_analyzer/services/statistics.py (create_histogram)\nRelated: Phase 2 Statistical Engine","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-21T21:55:07.145596813+01:00","updated_at":"2025-12-21T21:55:07.145596813+01:00"}
{"id":"option_returns-ouf","title":"Implement IBKRClient Base with Retry Logic","description":"Create src/option_analyzer/clients/ibkr.py with HTTPX client setup (base URL, timeout, SSL config). Integrate RateLimiter from Phase 1. Implement exponential backoff retry logic (1s-\u003e2s-\u003e4s, max 3 retries). Error response parsing and exception mapping.","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-21T21:50:57.574629763+01:00","updated_at":"2025-12-21T21:50:57.574629763+01:00","dependencies":[{"issue_id":"option_returns-ouf","depends_on_id":"option_returns-ept","type":"blocks","created_at":"2025-12-21T21:51:03.685011156+01:00","created_by":"daemon"},{"issue_id":"option_returns-ouf","depends_on_id":"option_returns-jcq","type":"blocks","created_at":"2025-12-21T21:51:03.722704133+01:00","created_by":"daemon"},{"issue_id":"option_returns-ouf","depends_on_id":"option_returns-dmu","type":"blocks","created_at":"2025-12-21T21:51:03.760869803+01:00","created_by":"daemon"}]}
{"id":"option_returns-tbp","title":"Implement Stock Quote Endpoint","description":"Implement get_stock(symbol: str) -\u003e Stock method in IBKRClient. Uses /stock/{conid}/quote endpoint. Returns Phase 1 Stock model. Cache integration with 5min TTL. Mock-based unit tests.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-21T21:51:15.75512055+01:00","updated_at":"2025-12-21T21:51:15.75512055+01:00","dependencies":[{"issue_id":"option_returns-tbp","depends_on_id":"option_returns-ouf","type":"blocks","created_at":"2025-12-21T21:51:24.951717417+01:00","created_by":"daemon"},{"issue_id":"option_returns-tbp","depends_on_id":"option_returns-7xh","type":"blocks","created_at":"2025-12-21T21:51:24.987257303+01:00","created_by":"daemon"}]}
{"id":"option_returns-tgg","title":"Phase 3: IBKR Integration","description":"Interactive Brokers API client with rate limiting\n\nTasks:\n- [ ] HTTPX client with rate limiting\n- [ ] Retry logic with exponential backoff\n- [ ] Cache layer\n- [ ] Stock/chain/history endpoints (configurable years)\n- [ ] Error handling (IBKR down, symbol not found, rate limited)\n- [ ] Mock-based integration tests\n- [ ] Optional: Real IBKR integration tests\n\nDeliverables:\n- IBKRClient with rate limiting (50 req/60s)\n- Retry logic with exponential backoff\n- Cache interface with in-memory implementation\n- Comprehensive error handling\n\nSuccess Criteria:\n- Rate limiting prevents IBKR bans\n- Retries handle transient failures\n- Cache reduces redundant API calls","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-19T21:53:32.871650723+01:00","updated_at":"2025-12-19T21:53:32.871650723+01:00","dependencies":[{"issue_id":"option_returns-tgg","depends_on_id":"option_returns-ept","type":"blocks","created_at":"2025-12-21T21:51:46.499016456+01:00","created_by":"daemon"},{"issue_id":"option_returns-tgg","depends_on_id":"option_returns-jcq","type":"blocks","created_at":"2025-12-21T21:51:46.538582774+01:00","created_by":"daemon"},{"issue_id":"option_returns-tgg","depends_on_id":"option_returns-dmu","type":"blocks","created_at":"2025-12-21T21:51:46.575770185+01:00","created_by":"daemon"},{"issue_id":"option_returns-tgg","depends_on_id":"option_returns-ouf","type":"blocks","created_at":"2025-12-21T21:51:46.608143256+01:00","created_by":"daemon"},{"issue_id":"option_returns-tgg","depends_on_id":"option_returns-7xh","type":"blocks","created_at":"2025-12-21T21:51:46.64266624+01:00","created_by":"daemon"},{"issue_id":"option_returns-tgg","depends_on_id":"option_returns-tbp","type":"blocks","created_at":"2025-12-21T21:51:46.680152075+01:00","created_by":"daemon"},{"issue_id":"option_returns-tgg","depends_on_id":"option_returns-b96","type":"blocks","created_at":"2025-12-21T21:51:46.716036874+01:00","created_by":"daemon"},{"issue_id":"option_returns-tgg","depends_on_id":"option_returns-6ik","type":"blocks","created_at":"2025-12-21T21:51:46.75486191+01:00","created_by":"daemon"},{"issue_id":"option_returns-tgg","depends_on_id":"option_returns-gd3","type":"blocks","created_at":"2025-12-21T21:51:46.792694882+01:00","created_by":"daemon"}]}
{"id":"option_returns-ukg","title":"Unit tests for Risk Module (\u003e90% coverage)","description":"Comprehensive unit tests for risk metrics calculations.\n\nDeliverables:\n- tests/unit/test_risk.py (~200 lines)\n- ~10 unit tests across 3 test classes\n\nTest Classes:\n- TestCalculateExpectedValue (4 tests)\n  - Simple EV calculation\n  - Weighted probability validation\n  - Empty bins error\n  - Zero count error\n  \n- TestCalculateProbabilityOfProfit (4 tests)\n  - All profitable scenarios (PoP = 1.0)\n  - No profitable scenarios (PoP = 0.0)\n  - Partial profitable scenarios\n  - Breakeven not counted as profitable\n  \n- TestCalculateRiskMetrics (2 tests)\n  - Strategy validation before calculation\n  - Returns RiskMetrics object\n\nCoverage Target: \u003e90% for risk.py\n\nTest Helpers:\n- Fixtures for test strategies (covered call, straddle, etc.)\n- Helper functions for creating bins with specific P\u0026L profiles","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-21T21:42:14.457120414+01:00","updated_at":"2025-12-21T21:42:14.457120414+01:00","dependencies":[{"issue_id":"option_returns-ukg","depends_on_id":"option_returns-eiu","type":"blocks","created_at":"2025-12-21T21:42:30.062444705+01:00","created_by":"daemon"}]}
{"id":"option_returns-yaf","title":"Phase 1: Foundation","description":"Project setup and core domain models\n\nTasks:\n- [ ] Project setup (pyproject.toml, directory structure)\n- [ ] Configuration management (including transaction costs, historical years)\n- [ ] Domain models (with validation, single-expiration check)\n- [ ] Custom exceptions (IBKRAPIError, validation errors)\n- [ ] Rate limiter utility\n- [ ] Unit tests for models and validation\n\nDeliverables:\n- Working domain models (Stock, OptionContract, OptionPosition, Strategy)\n- Validation logic (single-expiration, zero quantity)\n- Configuration with Pydantic settings\n- 90%+ test coverage for models","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-19T21:53:14.537949317+01:00","updated_at":"2025-12-19T22:06:41.351390928+01:00","closed_at":"2025-12-19T22:06:41.351390928+01:00","close_reason":"Phase 1 foundation complete with 94.63% test coverage"}
